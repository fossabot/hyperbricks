let lastIndex=null,activeBackground=1,isTransitioning=!1,backgroundTimeout=null;function getNextRandomIndex(t){let e;do{e=Math.floor(Math.random()*t)}while(e===lastIndex);return lastIndex=e,e}function refreshBackground(t){if(isTransitioning)return;isTransitioning=!0;const e=document.getElementById("background1"),n=document.getElementById("background2"),o=document.getElementById("quote-button");if(!e||!n||!o)return console.error("Background elements or button not found!"),void(isTransitioning=!1);o.classList.replace("bg-black","bg-white"),o.classList.replace("text-white","text-black");const i=1===activeBackground?e:n,a=1===activeBackground?n:e,c=`https://picsum.photos/1920/1080?random=${(new Date).getTime()}`,s=new Image;s.src=c,s.onload=()=>{a.style.backgroundImage=`url('${c}')`,a.style.opacity="1",i.style.opacity="0",backgroundTimeout&&clearTimeout(backgroundTimeout),backgroundTimeout=setTimeout((()=>{i.style.backgroundImage="",isTransitioning=!1;const e=document.getElementById("quote-button");e.classList.replace("bg-white","bg-black"),e.classList.replace("text-black","text-white"),t&&t()}),2e3),s.onload=null},activeBackground=1===activeBackground?2:1}function myCustomEvent(t=5){if(isTransitioning)return;const e=document.getElementById("quote-box");e.classList.remove("opacity-100","transition-opacity","duration-500"),e.classList.add("opacity-0","transition-opacity","duration-500");const n=document.getElementById("quote-button");n.classList.replace("bg-black","bg-white"),n.classList.replace("text-white","text-black"),backgroundTimeout=setTimeout((()=>{const n=getNextRandomIndex(t);htmx.ajax("GET",`/get-quote?id=${n}`).then((()=>{refreshBackground((()=>{e.classList.remove("opacity-0","transition-opacity","duration-500"),e.classList.add("opacity-100","transition-opacity","duration-500")}))}))}),500)}htmx.config.timeout=5e3,document.addEventListener("htmx:sendError",(function(t){const e=document.getElementById("quote-box");e.classList.remove("opacity-0","transition-opacity","duration-500"),e.classList.add("opacity-100","transition-opacity","duration-500"),e.innerHTML="Connection lost..."}));